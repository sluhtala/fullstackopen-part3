(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{23:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(17),c=n.n(r),o=n(18),u=n(8),i=n(3),a=n(2),s=(n(23),n(4)),l=n.n(s),b="http://sluhtalafullstackopen.herokuapp.com/api/persons",d={baseURL:b,addNumber:function(e){return l.a.post(b,e).then((function(e){return e.data}))},deleteNumber:function(e){return l.a.delete("".concat(b,"/").concat(e.id)).then((function(e){return e.data}))},updateNumber:function(e){return l.a.put("".concat(b,"/").concat(e.id),e).then((function(e){return e.data}))}},f=n(0),j=function(e){var t=e.notification,n=e.error;return t?Object(f.jsx)("div",{className:n?"error notification":"notification",children:t}):null},m=function(e){var t=e.person,n=e.pattern,r=e.deleteNumber;return n.test(t.name)?Object(f.jsxs)("p",{children:[t.name," ",t.number," ",Object(f.jsx)("button",{onClick:function(){return r(t)},children:"delete"})]}):""},h=function(e){var t=e.persons,n=e.filter,r=e.deleteNumber,c=RegExp("(^.* |^)"+n,"i");return t?0===t.length?"":Object(f.jsx)(f.Fragment,{children:t.map((function(e,t){return Object(f.jsx)(m,{pattern:c,person:e,deleteNumber:function(e){return r(e)}},e.id)}))}):null},O=function(e){var t=e.handleSubmit,n=e.setNewName,r=e.setNewNumber,c=e.newName,o=e.newNumber;return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("form",{onSubmit:t,children:[Object(f.jsxs)("div",{children:["name:"," ",Object(f.jsx)("input",{value:c,onChange:function(e){return n(e.target.value)}})]}),Object(f.jsxs)("div",{children:["number:"," ",Object(f.jsx)("input",{value:o,onChange:function(e){return r(e.target.value)}})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})})},p=function(e){var t=e.filter,n=e.setFilter;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{children:"filter shown with "}),Object(f.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(f.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})})]})},v=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(i.a)(c,2),b=s[0],m=s[1],v=Object(a.useState)(""),x=Object(i.a)(v,2),N=x[0],g=x[1],w=Object(a.useState)(""),S=Object(i.a)(w,2),k=S[0],F=S[1],y=Object(a.useState)(null),C=Object(i.a)(y,2),E=C[0],D=C[1],R=Object(a.useState)(!1),T=Object(i.a)(R,2),I=T[0],J=T[1];Object(a.useEffect)((function(){l.a.get(d.baseURL).then((function(e){r(e.data)})).catch((function(e){console.log(e)}))}),[]);var L=function(e){if(e.preventDefault(),N&&b)if(/[0-9\s+-]+/.test(N)){var t=n.find((function(e){return e.name===b}));t?function(e){if(window.confirm("".concat(e.name," is already added to phonebook, replace the old number with new one?"))){var t=Object(u.a)(Object(u.a)({},e),{},{number:N});d.updateNumber(t).then((function(c){console.log(c);var u=Object(o.a)(n),i=u.find((function(t){return t.id===e.id}));i.number=t.number,r(u),D("Number of ".concat(i.name," updated")),setTimeout((function(){D(null)}),4e3)}))}}(t):function(){var e={name:b,number:N,id:function(){var e=0;return n.forEach((function(t){t.id>e&&(e=t.id)})),e}()+1};d.addNumber(e).then((function(){r(n.concat(e)),D("".concat(e.name," added")),setTimeout((function(){D(null)}),6e3)})).catch((function(e){console.log(e)}))}(),m(""),g("")}else console.log("Not a valid number");else console.log("Fill both fields")};return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(j,{notification:E,error:I}),Object(f.jsx)(p,{filter:k,setFilter:function(e){F(e)}}),Object(f.jsx)("h3",{children:"Add a new"}),Object(f.jsx)(O,{setNewNumber:function(e){return g(e)},setNewName:function(e){return m(e)},newName:b,newNumber:N,handleSubmit:function(e){return L(e)}}),Object(f.jsx)("h3",{children:"Numbers"}),Object(f.jsx)(h,{persons:n,filter:k,deleteNumber:function(e){!function(e){if(!1!==window.confirm("Delete ".concat(e.name,"?"))){d.deleteNumber(e).then((function(e){return console.log(e)})).catch((function(t){console.log(t),J(!0),D("Information of ".concat(e.name," has already removed from the server")),setTimeout((function(){D(null),J(!1)}),5e3)}));var t=n.filter((function(t){return t.id!==e.id}));r(t)}}(e)}})]})};c.a.render(Object(f.jsx)(v,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.59ad5213.chunk.js.map