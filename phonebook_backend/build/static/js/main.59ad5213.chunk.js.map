{"version":3,"sources":["backend.js","Notification.js","App.js","index.js"],"names":["baseURL","backEnd","addNumber","person","axios","post","then","respond","data","deleteNumber","delete","id","updateNumber","put","Notification","notification","error","className","Number","props","pattern","test","name","number","onClick","Numbers","persons","filter","RegExp","length","map","i","arg","Form","handleSubmit","setNewName","setNewNumber","newName","newNumber","onSubmit","value","onChange","e","target","type","Filter","setFilter","preventDefault","App","useState","setPersons","setNotification","useError","setUseError","useEffect","get","res","catch","console","log","event","checkName","find","window","confirm","newObject","result","newPersons","currentPerson","p","setTimeout","newPerson","biggest","forEach","findMaxId","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.59ad5213.chunk.js","sourcesContent":["import axios from \"axios\";\n\nconst baseURL = \"http://sluhtalafullstackopen.herokuapp.com/api/persons\";\n\nconst backEnd = {\n\tbaseURL: baseURL,\n\taddNumber: (person) => {\n\t\tconst request = axios.post(baseURL, person);\n\t\treturn request.then((respond) => respond.data);\n\t},\n\n\tdeleteNumber: (person) => {\n\t\tconst request = axios.delete(`${baseURL}/${person.id}`);\n\t\treturn request.then((respond) => respond.data);\n\t},\n\n\tupdateNumber: (person) => {\n\t\tconst request = axios.put(`${baseURL}/${person.id}`, person);\n\t\treturn request.then((respond) => respond.data);\n\t},\n};\n\nexport default backEnd;\n","const Notification = ({ notification, error }) => {\n\tif (!notification) return null;\n\treturn (\n\t\t<div className={error ? \"error notification\" : \"notification\"}>\n\t\t\t{notification}\n\t\t</div>\n\t);\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from \"react\";\nimport \"./index.css\";\nimport axios from \"axios\";\nimport backEnd from \"./backend\";\nimport Notification from \"./Notification\";\n\nconst Number = (props) => {\n\tconst { person, pattern, deleteNumber } = props;\n\tif (!pattern.test(person.name)) return \"\";\n\treturn (\n\t\t<p>\n\t\t\t{person.name} {person.number}{\" \"}\n\t\t\t<button onClick={() => deleteNumber(person)}>delete</button>\n\t\t</p>\n\t);\n};\n\nconst Numbers = (props) => {\n\tconst { persons, filter, deleteNumber } = props;\n\tconst pattern = RegExp(\"(^.* |^)\" + filter, \"i\");\n\tif (!persons) return null;\n\tif (persons.length === 0) {\n\t\treturn \"\";\n\t}\n\treturn (\n\t\t<>\n\t\t\t{persons.map((person, i) => {\n\t\t\t\treturn (\n\t\t\t\t\t<Number\n\t\t\t\t\t\tpattern={pattern}\n\t\t\t\t\t\tkey={person.id}\n\t\t\t\t\t\tperson={person}\n\t\t\t\t\t\tdeleteNumber={(arg) => deleteNumber(arg)}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t})}\n\t\t</>\n\t);\n};\n\nconst Form = (props) => {\n\t//console.log(props);\n\tconst {\n\t\thandleSubmit,\n\t\tsetNewName,\n\t\tsetNewNumber,\n\t\tnewName,\n\t\tnewNumber,\n\t} = props;\n\treturn (\n\t\t<>\n\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t<div>\n\t\t\t\t\tname:{\" \"}\n\t\t\t\t\t<input\n\t\t\t\t\t\tvalue={newName}\n\t\t\t\t\t\tonChange={(e) => setNewName(e.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\tnumber:{\" \"}\n\t\t\t\t\t<input\n\t\t\t\t\t\tvalue={newNumber}\n\t\t\t\t\t\tonChange={(e) => setNewNumber(e.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<button type=\"submit\">add</button>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</>\n\t);\n};\n\nconst Filter = (props) => {\n\tconst { filter, setFilter } = props;\n\treturn (\n\t\t<>\n\t\t\t<div>filter shown with </div>\n\t\t\t<form\n\t\t\t\tonSubmit={(e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<input\n\t\t\t\t\tvalue={filter}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tsetFilter(e.target.value);\n\t\t\t\t\t}}\n\t\t\t\t></input>\n\t\t\t</form>\n\t\t</>\n\t);\n};\n\nconst App = () => {\n\tconst [persons, setPersons] = useState([]);\n\tconst [newName, setNewName] = useState(\"\");\n\tconst [newNumber, setNewNumber] = useState(\"\");\n\tconst [filter, setFilter] = useState(\"\");\n\tconst [notification, setNotification] = useState(null);\n\tconst [useError, setUseError] = useState(false);\n\n\tconst getDataHook = () => {\n\t\taxios\n\t\t\t.get(backEnd.baseURL)\n\t\t\t.then((res) => {\n\t\t\t\tsetPersons(res.data);\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tconsole.log(e);\n\t\t\t});\n\t};\n\tuseEffect(getDataHook, []);\n\n\tconst updateNumber = (person) => {\n\t\tif (\n\t\t\t!window.confirm(\n\t\t\t\t`${person.name} is already added to phonebook, replace the old number with new one?`\n\t\t\t)\n\t\t)\n\t\t\treturn;\n\t\tconst newObject = { ...person, number: newNumber };\n\t\tbackEnd.updateNumber(newObject).then((result) => {\n\t\t\tconsole.log(result);\n\t\t\tconst newPersons = [...persons];\n\t\t\tconst currentPerson = newPersons.find((p) => p.id === person.id);\n\t\t\tcurrentPerson.number = newObject.number;\n\t\t\tsetPersons(newPersons);\n\t\t\tsetNotification(`Number of ${currentPerson.name} updated`);\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetNotification(null);\n\t\t\t}, 4000);\n\t\t});\n\t};\n\n\tconst addNumber = () => {\n\t\tconst findMaxId = () => {\n\t\t\tlet biggest = 0;\n\t\t\tpersons.forEach((person) => {\n\t\t\t\tif (person.id > biggest) biggest = person.id;\n\t\t\t});\n\t\t\treturn biggest;\n\t\t};\n\t\tconst newPerson = {\n\t\t\tname: newName,\n\t\t\tnumber: newNumber,\n\t\t\tid: findMaxId() + 1,\n\t\t};\n\t\tbackEnd\n\t\t\t.addNumber(newPerson)\n\t\t\t.then(() => {\n\t\t\t\tsetPersons(persons.concat(newPerson));\n\t\t\t\tsetNotification(`${newPerson.name} added`);\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tsetNotification(null);\n\t\t\t\t}, 6000);\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tconsole.log(e);\n\t\t\t});\n\t};\n\n\tconst handleSubmit = (event) => {\n\t\tevent.preventDefault();\n\t\tif (!newNumber || !newName) {\n\t\t\tconsole.log(\"Fill both fields\");\n\t\t\treturn;\n\t\t}\n\t\tif (!/[0-9\\s+-]+/.test(newNumber)) {\n\t\t\tconsole.log(\"Not a valid number\");\n\t\t\treturn;\n\t\t}\n\t\tconst checkName = persons.find((person) => {\n\t\t\treturn person.name === newName;\n\t\t});\n\t\tif (checkName) updateNumber(checkName);\n\t\telse addNumber();\n\t\tsetNewName(\"\");\n\t\tsetNewNumber(\"\");\n\t};\n\n\tconst deleteNumber = (person) => {\n\t\tif (window.confirm(`Delete ${person.name}?`) === false) return;\n\t\tbackEnd\n\t\t\t.deleteNumber(person)\n\t\t\t.then((result) => console.log(result))\n\t\t\t.catch((e) => {\n\t\t\t\tconsole.log(e);\n\t\t\t\tsetUseError(true);\n\t\t\t\tsetNotification(\n\t\t\t\t\t`Information of ${person.name} has already removed from the server`\n\t\t\t\t);\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tsetNotification(null);\n\t\t\t\t\tsetUseError(false);\n\t\t\t\t}, 5000);\n\t\t\t});\n\t\tconst newPersons = persons.filter((p) => {\n\t\t\treturn p.id !== person.id;\n\t\t});\n\t\tsetPersons(newPersons);\n\t};\n\treturn (\n\t\t<div>\n\t\t\t<h2>Phonebook</h2>\n\t\t\t<Notification notification={notification} error={useError} />\n\t\t\t<Filter\n\t\t\t\tfilter={filter}\n\t\t\t\tsetFilter={(arg) => {\n\t\t\t\t\tsetFilter(arg);\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<h3>Add a new</h3>\n\t\t\t<Form\n\t\t\t\tsetNewNumber={(arg) => setNewNumber(arg)}\n\t\t\t\tsetNewName={(arg) => setNewName(arg)}\n\t\t\t\tnewName={newName}\n\t\t\t\tnewNumber={newNumber}\n\t\t\t\thandleSubmit={(e) => handleSubmit(e)}\n\t\t\t/>\n\t\t\t<h3>Numbers</h3>\n\t\t\t<Numbers\n\t\t\t\tpersons={persons}\n\t\t\t\tfilter={filter}\n\t\t\t\tdeleteNumber={(arg) => {\n\t\t\t\t\tdeleteNumber(arg);\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}